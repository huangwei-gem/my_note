# 🔤 CMD 脚本编码问题解决方案

## 🚨 问题描述

在 Windows 系统中运行 CMD 脚本时，可能会遇到中文乱码问题，表现为：
- 脚本中的中文字符显示为乱码
- 出现 `'xxx' 不是内部或外部命令` 的错误
- 提示信息无法正确读取

## 🔍 原因分析

1. **编码格式不兼容**：CMD 默认使用系统本地编码（通常是 GBK）
2. **UTF-8 BOM 问题**：某些编辑器保存的 UTF-8 文件带有 BOM 头
3. **代码页设置**：chcp 命令设置不当可能导致显示异常

## ✅ 解决方案

### 方案一：使用简化版脚本（推荐）

我们创建了 `git-push-simple.cmd`，使用系统默认编码，避免乱码问题：

```batch
@echo off
:: 使用系统默认编码，避免乱码问题
echo.
echo =====================================
echo     Git 自动提交脚本 (简化版)
echo =====================================
echo.
:: 其余代码保持不变，使用英文提示
```

**使用方法**：
```bash
git-push-simple.cmd
```

### 方案二：修改系统区域设置

1. **打开控制面板** → **区域**
2. 切换到 **管理** 选项卡
3. 点击 **更改系统区域设置**
4. 勾选 **Beta版：使用Unicode UTF-8提供全球语言支持**
5. 重启电脑

### 方案三：使用 PowerShell 替代

创建 PowerShell 版本的脚本，天然支持 Unicode：

```powershell
# git-push-ps.ps1
Write-Host "Git 自动提交脚本" -ForegroundColor Green
# PowerShell 代码...
```

### 方案四：手动设置代码页

在 CMD 中手动设置代码页：

```batch
:: 在运行脚本前执行
chcp 936    :: GBK 编码
chcp 65001  :: UTF-8 编码
```

## 🛠️ 编辑器设置建议

### VS Code 设置
1. 打开设置（Ctrl + ,）
2. 搜索 `files.encoding`
3. 设置为 `gbk` 或 `utf8`
4. 搜索 `files.autoGuessEncoding`
5. 启用自动编码检测

### Notepad++ 设置
1. 打开文件
2. 点击菜单 **编码**
3. 选择 **以ANSI格式编码** 或 **以UTF-8格式编码**
4. 重新保存文件

## 📋 最佳实践

1. **统一编码**：团队内统一使用相同的编码格式
2. **避免特殊字符**：在脚本中尽量使用英文和数字
3. **测试验证**：在不同环境下测试脚本兼容性
4. **备份原始文件**：修改前备份原始脚本

## 🔧 当前项目解决方案

本项目提供了多个版本供选择：

| 文件名 | 编码 | 特点 | 适用场景 |
|--------|------|------|----------|
| `git-push.cmd` | UTF-8 | 中文界面，表情符号 | 系统支持UTF-8 |
| `git-push-simple.cmd` | ANSI | 简化版，系统默认编码 | 避免乱码问题 |
| `git-push-ps.ps1` | Unicode | PowerShell版本 | 完整Unicode支持 |

## 🎯 推荐方案

**普通用户**：使用 `git-push-simple.cmd`
**高级用户**：使用 PowerShell 版本
**特殊需求**：手动设置代码页后使用原版

## 📞 问题反馈

如果遇到其他编码相关问题：
1. 检查系统区域设置
2. 验证文件编码格式
3. 尝试不同的代码页设置
4. 考虑使用 PowerShell 替代方案